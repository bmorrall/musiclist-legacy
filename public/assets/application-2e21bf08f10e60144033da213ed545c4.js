!function(t,e){var a=function(){var e=t._data(document,"events");return e&&e.click&&t.grep(e.click,function(t){return"rails"===t.namespace}).length};a()&&t.error("jquery-ujs has already been loaded!");var n;t.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(e){var a=t('meta[name="csrf-token"]').attr("content");a&&e.setRequestHeader("X-CSRF-Token",a)},fire:function(e,a,n){var i=t.Event(a);return e.trigger(i,n),i.result!==!1},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(a){var i,r,l,o,s,u,d,c;if(n.fire(a,"ajax:before")){if(o=a.data("cross-domain"),s=o===e?null:o,u=a.data("with-credentials")||null,d=a.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,a.is("form")){i=a.attr("method"),r=a.attr("action"),l=a.serializeArray();var m=a.data("ujs:submit-button");m&&(l.push(m),a.data("ujs:submit-button",null))}else a.is(n.inputChangeSelector)?(i=a.data("method"),r=a.data("url"),l=a.serialize(),a.data("params")&&(l=l+"&"+a.data("params"))):(i=a.data("method"),r=n.href(a),l=a.data("params")||null);c={type:i||"GET",data:l,dataType:d,beforeSend:function(t,i){return i.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),n.fire(a,"ajax:beforeSend",[t,i])},success:function(t,e,n){a.trigger("ajax:success",[t,e,n])},complete:function(t,e){a.trigger("ajax:complete",[t,e])},error:function(t,e,n){a.trigger("ajax:error",[t,e,n])},crossDomain:s},u&&(c.xhrFields={withCredentials:u}),r&&(c.url=r);var f=n.ajax(c);return a.trigger("ajax:send",f),f}return!1},handleMethod:function(a){var i=n.href(a),r=a.data("method"),l=a.attr("target"),o=t("meta[name=csrf-token]").attr("content"),s=t("meta[name=csrf-param]").attr("content"),u=t('<form method="post" action="'+i+'"></form>'),d='<input name="_method" value="'+r+'" type="hidden" />';s!==e&&o!==e&&(d+='<input name="'+s+'" value="'+o+'" type="hidden" />'),l&&u.attr("target",l),u.hide().append(d).appendTo("body"),u.submit()},disableFormElements:function(e){e.find(n.disableSelector).each(function(){var e=t(this),a=e.is("button")?"html":"val";e.data("ujs:enable-with",e[a]()),e[a](e.data("disable-with")),e.prop("disabled",!0)})},enableFormElements:function(e){e.find(n.enableSelector).each(function(){var e=t(this),a=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[a](e.data("ujs:enable-with")),e.prop("disabled",!1)})},allowAction:function(t){var e,a=t.data("confirm"),i=!1;return a?(n.fire(t,"confirm")&&(i=n.confirm(a),e=n.fire(t,"confirm:complete",[i])),i&&e):!0},blankInputs:function(e,a,n){var i,r,l=t(),o=a||"input,textarea",s=e.find(o);return s.each(function(){if(i=t(this),r=i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):i.val(),!r==!n){if(i.is("input[type=radio]")&&s.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length)return!0;l=l.add(i)}}),l.length?l:!1},nonBlankInputs:function(t,e){return n.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},callFormSubmitBindings:function(a,n){var i=a.data("events"),r=!0;return i!==e&&i.submit!==e&&t.each(i.submit,function(t,e){return"function"==typeof e.handler?r=e.handler(n):void 0}),r},disableElement:function(t){t.data("ujs:enable-with",t.html()),t.html(t.data("disable-with")),t.bind("click.railsDisable",function(t){return n.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.data("ujs:enable-with",!1)),t.unbind("click.railsDisable")}},n.fire(t(document),"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,a){t.crossDomain||n.CSRFProtection(a)}),t(document).delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(t(this))}),t(document).delegate(n.linkClickSelector,"click.rails",function(a){var i=t(this),r=i.data("method"),l=i.data("params");if(!n.allowAction(i))return n.stopEverything(a);if(i.is(n.linkDisableSelector)&&n.disableElement(i),i.data("remote")!==e){if(!(!a.metaKey&&!a.ctrlKey||r&&"GET"!==r||l))return!0;var o=n.handleRemote(i);return o===!1?n.enableElement(i):o.error(function(){n.enableElement(i)}),!1}return i.data("method")?(n.handleMethod(i),!1):void 0}),t(document).delegate(n.inputChangeSelector,"change.rails",function(e){var a=t(this);return n.allowAction(a)?(n.handleRemote(a),!1):n.stopEverything(e)}),t(document).delegate(n.formSubmitSelector,"submit.rails",function(a){var i=t(this),r=i.data("remote")!==e,l=n.blankInputs(i,n.requiredInputSelector),o=n.nonBlankInputs(i,n.fileInputSelector);if(!n.allowAction(i))return n.stopEverything(a);if(l&&i.attr("novalidate")==e&&n.fire(i,"ajax:aborted:required",[l]))return n.stopEverything(a);if(r){if(o){setTimeout(function(){n.disableFormElements(i)},13);var s=n.fire(i,"ajax:aborted:file",[o]);return s||setTimeout(function(){n.enableFormElements(i)},13),s}return!t.support.submitBubbles&&t().jquery<"1.7"&&n.callFormSubmitBindings(i,a)===!1?n.stopEverything(a):(n.handleRemote(i),!1)}setTimeout(function(){n.disableFormElements(i)},13)}),t(document).delegate(n.formInputClickSelector,"click.rails",function(e){var a=t(this);if(!n.allowAction(a))return n.stopEverything(e);var i=a.attr("name"),r=i?{name:i,value:a.val()}:null;a.closest("form").data("ujs:submit-button",r)}),t(document).delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&n.disableFormElements(t(this))}),t(document).delegate(n.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&n.enableFormElements(t(this))}),t(function(){var e=t("meta[name=csrf-token]").attr("content"),a=t("meta[name=csrf-param]").attr("content");t('form input[name="'+a+'"]').val(e)}))}(jQuery),function(){}.call(this),function(){window.MusicList||(window.MusicList={}),MusicList.PlaylistAlbumView=function(){function t(t,e){var a=this;this.$el=t,this.album_statuses_path=e,this.album_id=this.$el.data("album"),this.$("a.played").click(function(){return a.togglePlayed()}),this.$("a.purchased").click(function(){return a.togglePurchased()})}return t.prototype.togglePlayed=function(){var t,e;t=this.$("a.played span.label"),t.removeClass("label-important"),t.toggleClass("label-warning"),e=t.hasClass("label-warning"),console.log("album played: "+this.album_id+"("+e+")"),$.ajax({type:"post",data:{album_status:{album_id:this.album_id,played:e}},error:function(e,a,n){console.error(a,n),t.removeClass("label-warning"),t.addClass("label-important")},url:this.album_statuses_path})},t.prototype.togglePurchased=function(){var t,e;t=this.$("a.purchased span.label"),t.removeClass("label-important"),t.toggleClass("label-warning"),e=t.hasClass("label-warning"),console.log("album purchased: "+this.album_id+"("+e+")"),$.ajax({type:"post",data:{album_status:{album_id:this.album_id,purchased:e}},error:function(e,a,n){console.error(a,n),t.removeClass("label-warning"),t.addClass("label-important")},url:this.album_statuses_path})},t.prototype.$=function(t){return this.$el.find(t)},t}(),MusicList.PlaylistTable=function(){function t(t){var e;this.$el=$(t),e=this.$el.data("album-statuses-path"),this.$el.find("tbody tr[data-album]").each(function(){new MusicList.PlaylistAlbumView($(this),e)})}return t}()}.call(this),$(document).ajaxSend(function(t,e){var a=$("meta[name='csrf-token']").attr("content");e.setRequestHeader("X-CSRF-Token",a)});